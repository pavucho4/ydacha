{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=_ref=>{let{addToCart,cart,clearCart,isPopular}=_ref;const[products,setProducts]=useState([]);const location=useLocation();const searchQuery=new URLSearchParams(location.search).get('search')||'';useEffect(()=>{axios.get('/api/products').then(response=>{let filteredProducts=response.data;if(searchQuery){filteredProducts=filteredProducts.filter(p=>p.name.toLowerCase().includes(searchQuery.toLowerCase()));}if(isPopular){filteredProducts=filteredProducts.slice(0,4);}setProducts(filteredProducts);}).catch(error=>console.error('Ошибка загрузки товаров:',error));},[searchQuery,isPopular]);const categories=Array.from(new Set(products.map(p=>p.category)));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-800\",children:isPopular?'Популярные товары':'Каталог товаров'}),!isPopular&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.location.href='/order',className:\"bg-gray-600 text-white p-2 rounded-lg hover:bg-gray-700 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M3 3h18l-2 12H5L3 3zm4 16a2 2 0 100-4 2 2 0 000 4zm10 0a2 2 0 100-4 2 2 0 000 4z\"})}),\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 (\",cart.length,\")\"]})]}),isPopular?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\",children:[product.photo?/*#__PURE__*/_jsx(\"img\",{src:product.photo,alt:product.name,className:\"w-full h-48 object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48 bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\u041D\\u0435\\u0442 \\u0444\\u043E\\u0442\\u043E\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-800\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mt-1\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 font-bold mt-2\",children:[product.price,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438: \",product.quantity,\" \\u0448\\u0442.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToCart(product),className:\"mt-4 w-full bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 text-sm\",children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]},product.id))}):categories.map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold text-gray-800 mb-6\",children:category}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\",children:products.filter(product=>product.category===category).map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\",children:[product.photo?/*#__PURE__*/_jsx(\"img\",{src:product.photo,alt:product.name,className:\"w-full h-48 object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48 bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\u041D\\u0435\\u0442 \\u0444\\u043E\\u0442\\u043E\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-800\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mt-1\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 font-bold mt-2\",children:[product.price,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438: \",product.quantity,\" \\u0448\\u0442.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToCart(product),className:\"mt-4 w-full bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 text-sm\",children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]},product.id))})]},category))]});};export default ProductList;","map":{"version":3,"names":["React","useEffect","useState","axios","useLocation","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","addToCart","cart","clearCart","isPopular","products","setProducts","location","searchQuery","URLSearchParams","search","get","then","response","filteredProducts","data","filter","p","name","toLowerCase","includes","slice","catch","error","console","categories","Array","from","Set","map","category","children","className","onClick","window","href","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","length","product","photo","src","alt","description","price","quantity","id"],"sources":["D:/frontend/src/components/ProductList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\ninterface Product {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  quantity: number;\r\n  photo: string | null;\r\n  category: string;\r\n}\r\n\r\ninterface CartItem {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  quantity: number;\r\n}\r\n\r\ninterface ProductListProps {\r\n  addToCart: (product: Product) => void;\r\n  cart: CartItem[];\r\n  clearCart: () => void;\r\n  isPopular?: boolean;\r\n}\r\n\r\nconst ProductList: React.FC<ProductListProps> = ({ addToCart, cart, clearCart, isPopular }) => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const location = useLocation();\r\n  const searchQuery = new URLSearchParams(location.search).get('search') || '';\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/products')\r\n      .then(response => {\r\n        let filteredProducts = response.data;\r\n        if (searchQuery) {\r\n          filteredProducts = filteredProducts.filter((p: Product) =>\r\n            p.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n          );\r\n        }\r\n        if (isPopular) {\r\n          filteredProducts = filteredProducts.slice(0, 4);\r\n        }\r\n        setProducts(filteredProducts);\r\n      })\r\n      .catch(error => console.error('Ошибка загрузки товаров:', error));\r\n  }, [searchQuery, isPopular]);\r\n\r\n  const categories = Array.from(new Set(products.map(p => p.category)));\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h2 className=\"text-2xl font-semibold text-gray-800\">\r\n          {isPopular ? 'Популярные товары' : 'Каталог товаров'}\r\n        </h2>\r\n        {!isPopular && (\r\n          <button\r\n            onClick={() => window.location.href = '/order'}\r\n            className=\"bg-gray-600 text-white p-2 rounded-lg hover:bg-gray-700 flex items-center\"\r\n          >\r\n            <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 3h18l-2 12H5L3 3zm4 16a2 2 0 100-4 2 2 0 000 4zm10 0a2 2 0 100-4 2 2 0 000 4z\" />\r\n            </svg>\r\n            Корзина ({cart.length})\r\n          </button>\r\n        )}\r\n      </div>\r\n      {isPopular ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          {products.map(product => (\r\n            <div key={product.id} className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\">\r\n              {product.photo ? (\r\n                <img src={product.photo} alt={product.name} className=\"w-full h-48 object-cover\" />\r\n              ) : (\r\n                <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\r\n                  <span className=\"text-gray-500\">Нет фото</span>\r\n                </div>\r\n              )}\r\n              <div className=\"p-4\">\r\n                <h4 className=\"text-lg font-medium text-gray-800\">{product.name}</h4>\r\n                <p className=\"text-gray-600 text-sm mt-1\">{product.description}</p>\r\n                <p className=\"text-green-600 font-bold mt-2\">{product.price} руб.</p>\r\n                <p className=\"text-gray-500 text-sm\">В наличии: {product.quantity} шт.</p>\r\n                <button\r\n                  onClick={() => addToCart(product)}\r\n                  className=\"mt-4 w-full bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 text-sm\"\r\n                >\r\n                  В корзину\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        categories.map(category => (\r\n          <div key={category} className=\"mb-12\">\r\n            <h3 className=\"text-2xl font-semibold text-gray-800 mb-6\">{category}</h3>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {products\r\n                .filter(product => product.category === category)\r\n                .map(product => (\r\n                  <div key={product.id} className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\">\r\n                    {product.photo ? (\r\n                      <img src={product.photo} alt={product.name} className=\"w-full h-48 object-cover\" />\r\n                    ) : (\r\n                      <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\r\n                        <span className=\"text-gray-500\">Нет фото</span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"p-4\">\r\n                      <h4 className=\"text-lg font-medium text-gray-800\">{product.name}</h4>\r\n                      <p className=\"text-gray-600 text-sm mt-1\">{product.description}</p>\r\n                      <p className=\"text-green-600 font-bold mt-2\">{product.price} руб.</p>\r\n                      <p className=\"text-gray-500 text-sm\">В наличии: {product.quantity} шт.</p>\r\n                      <button\r\n                        onClick={() => addToCart(product)}\r\n                        className=\"mt-4 w-full bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 text-sm\"\r\n                      >\r\n                        В корзину\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}