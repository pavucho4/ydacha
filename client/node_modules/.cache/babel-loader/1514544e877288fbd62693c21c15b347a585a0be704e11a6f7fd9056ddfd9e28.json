{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=_ref=>{var _location$state;let{addToCart,cart,clearCart,isPopular}=_ref;const[products,setProducts]=useState([]);const navigate=useNavigate();const location=useLocation();const searchQuery=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.search)||'';useEffect(()=>{axios.get('/api/products')// Обновлено с http://localhost:5000/api/products\n.then(response=>{let filteredProducts=response.data;if(searchQuery){filteredProducts=filteredProducts.filter(p=>p.name.toLowerCase().includes(searchQuery.toLowerCase()));}if(isPopular){filteredProducts=filteredProducts.slice(0,4);}setProducts(filteredProducts);}).catch(error=>console.error('Ошибка загрузки товаров:',error));},[searchQuery,isPopular]);const categories=Array.from(new Set(products.map(p=>p.category)));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:isPopular?'Популярные товары':'Каталог товаров'}),!isPopular&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/order',{state:{cart}}),className:\"btn-secondary flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M3 3h18l-2 12H5L3 3zm4 16a2 2 0 100-4 2 2 0 000 4zm10 0a2 2 0 100-4 2 2 0 000 4z\"})}),\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 (\",cart.length,\")\"]})]}),isPopular?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\",children:[product.photo?/*#__PURE__*/_jsx(\"img\",{src:product.photo,alt:product.name,className:\"w-full h-48 object-cover\"})// Обновлено с http://localhost:5000\n:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48 bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\u041D\\u0435\\u0442 \\u0444\\u043E\\u0442\\u043E\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-800\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mt-1\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 font-bold mt-2\",children:[product.price,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438: \",product.quantity,\" \\u0448\\u0442.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToCart(product),className:\"mt-4 w-full btn-primary text-sm\",children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]},product.id))}):categories.map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold text-gray-800 mb-6\",children:category}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\",children:products.filter(product=>product.category===category).map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\",children:[product.photo?/*#__PURE__*/_jsx(\"img\",{src:product.photo,alt:product.name,className:\"w-full h-48 object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48 bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\u041D\\u0435\\u0442 \\u0444\\u043E\\u0442\\u043E\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-800\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mt-1\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 font-bold mt-2\",children:[product.price,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438: \",product.quantity,\" \\u0448\\u0442.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToCart(product),className:\"mt-4 w-full btn-primary text-sm\",children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]},product.id))})]},category))]});};export default ProductList;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","_location$state","addToCart","cart","clearCart","isPopular","products","setProducts","navigate","location","searchQuery","state","search","get","then","response","filteredProducts","data","filter","p","name","toLowerCase","includes","slice","catch","error","console","categories","Array","from","Set","map","category","children","className","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","length","product","photo","src","alt","description","price","quantity","id"],"sources":["D:/frontend/src/components/ProductList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\ninterface Product {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  quantity: number;\r\n  photo: string | null;\r\n  category: string;\r\n}\r\n\r\ninterface CartItem {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  quantity: number;\r\n}\r\n\r\ninterface ProductListProps {\r\n  addToCart: (product: Product) => void;\r\n  cart: CartItem[];\r\n  clearCart: () => void;\r\n  isPopular?: boolean;\r\n}\r\n\r\nconst ProductList: React.FC<ProductListProps> = ({ addToCart, cart, clearCart, isPopular }) => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const searchQuery = (location.state as { search?: string })?.search || '';\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/products') // Обновлено с http://localhost:5000/api/products\r\n      .then(response => {\r\n        let filteredProducts = response.data;\r\n        if (searchQuery) {\r\n          filteredProducts = filteredProducts.filter((p: Product) =>\r\n            p.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n          );\r\n        }\r\n        if (isPopular) {\r\n          filteredProducts = filteredProducts.slice(0, 4);\r\n        }\r\n        setProducts(filteredProducts);\r\n      })\r\n      .catch(error => console.error('Ошибка загрузки товаров:', error));\r\n  }, [searchQuery, isPopular]);\r\n\r\n  const categories = Array.from(new Set(products.map(p => p.category)));\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h2 className=\"section-title\">{isPopular ? 'Популярные товары' : 'Каталог товаров'}</h2>\r\n        {!isPopular && (\r\n          <button\r\n            onClick={() => navigate('/order', { state: { cart } })}\r\n            className=\"btn-secondary flex items-center\"\r\n          >\r\n            <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 3h18l-2 12H5L3 3zm4 16a2 2 0 100-4 2 2 0 000 4zm10 0a2 2 0 100-4 2 2 0 000 4z\" />\r\n            </svg>\r\n            Корзина ({cart.length})\r\n          </button>\r\n        )}\r\n      </div>\r\n      {isPopular ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          {products.map(product => (\r\n            <div key={product.id} className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\">\r\n              {product.photo ? (\r\n                <img src={product.photo} alt={product.name} className=\"w-full h-48 object-cover\" /> // Обновлено с http://localhost:5000\r\n              ) : (\r\n                <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\r\n                  <span className=\"text-gray-500\">Нет фото</span>\r\n                </div>\r\n              )}\r\n              <div className=\"p-4\">\r\n                <h4 className=\"text-lg font-medium text-gray-800\">{product.name}</h4>\r\n                <p className=\"text-gray-600 text-sm mt-1\">{product.description}</p>\r\n                <p className=\"text-green-600 font-bold mt-2\">{product.price} руб.</p>\r\n                <p className=\"text-gray-500 text-sm\">В наличии: {product.quantity} шт.</p>\r\n                <button onClick={() => addToCart(product)} className=\"mt-4 w-full btn-primary text-sm\">\r\n                  В корзину\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        categories.map(category => (\r\n          <div key={category} className=\"mb-12\">\r\n            <h3 className=\"text-2xl font-semibold text-gray-800 mb-6\">{category}</h3>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {products\r\n                .filter(product => product.category === category)\r\n                .map(product => (\r\n                  <div key={product.id} className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300\">\r\n                    {product.photo ? (\r\n                      <img src={product.photo} alt={product.name} className=\"w-full h-48 object-cover\" />\r\n                    ) : (\r\n                      <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\r\n                        <span className=\"text-gray-500\">Нет фото</span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"p-4\">\r\n                      <h4 className=\"text-lg font-medium text-gray-800\">{product.name}</h4>\r\n                      <p className=\"text-gray-600 text-sm mt-1\">{product.description}</p>\r\n                      <p className=\"text-green-600 font-bold mt-2\">{product.price} руб.</p>\r\n                      <p className=\"text-gray-500 text-sm\">В наличии: {product.quantity} шт.</p>\r\n                      <button onClick={() => addToCart(product)} className=\"mt-4 w-full btn-primary text-sm\">\r\n                        В корзину\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}